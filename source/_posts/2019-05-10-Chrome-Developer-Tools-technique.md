---
title: Chrome Developer Tools 必备技巧
date: 2019-05-10 21:23:43
tags:
  - 开发工具
---

Chrome Developer Tools 是前端开发中必不可少的工具，其使用和调试技巧是成为一个合格开发人员必备的技能。

## 1~10

### 01 调试窗口的切换

mac：command + alt + i
windows: F12
弹出的调试窗口，可以独立于页面放置，可以嵌入页面的不同部位（左边、右边、下边）。开发手机页面的时候，放在右边是非常合适的。根据自身需求设置。

### 02 快速切换 PC 与手机端进行测试

点击快速切换按钮即可。
**PC 端宽口**：可以调整窗口的大小。页面的大小自适应情况也可由此看出来。
**浏览器端窗口**：

- 可以选择各种手机机型。也可选`Responsive`自定义尺寸或手动拉窗口大小。
- 也可以编辑各种各样的机型，增加固定的设备串口大小。保存下来可作为项目里的特定设备。下次直接调用。

### 03 页面元素的快速调试技巧

我们同时看到页面，和调试窗口中所有 html dom 的结构。我们可以在 dom 树中：

- 增加属性，编辑属性。产生的效果就快速在页面中显示出来。
- 快速展开，收起所有的节点
- 可快速调到 dom 对应页面位置。右键点选 scroll into view。
- dom 节点点选我们，我可以看到页面定义节点的高亮。
- 掌握这些，可以快速调试，快速定位。

### 04 如何保持元素的 hover 等状态

比如页面有些按钮有 hover 状态，悬浮停留的样式是区别开来。但是在 dom 中点选节点，只能看到非激活状态。
解决：我们只需要，在对应节点 dom 右键点选`:hover`即可. 这样我们就可以把页面固定住，对当前状态下的配色等参数进行调整。
当然，也可以对某个页面元素设置多个状态：

> 1、dom:link{color:#fff}   未访问时的状态（鼠标点击前显示的状态）
> 2、dom:hover{color:#fff}   鼠标悬停时的状态
> 3、dom:visited{color:#fff}   已访问过的状态（鼠标点击后的状态）
> 4、dom:active{color:#fff}   鼠标点击时的状态
> 5、a:focus{color:#fff}   点击后鼠标移开保持鼠标点击时的状态（只有在`<a href="#"></a>`时标签中有效）

### 05 元素状态改变的监控技巧

我们想在页面做改变的时候，停在过程中 ，然后我们做新的调试。chrome 里面有对应的方法。
我们可以控制整个页面的 div，已有改动我们就把变化停掉。当然，我们也可以细腻地控制，控制某个节点的 div 元素的变动。
右键 breake on 有三个选项：

- subtree modifications 子树做改变的时候
- attribute modifications 属性做改变的时候，比如颜色、背景色。
- node removal 节点移除的时候，
  比如选 subtree modifications，子树发生变化后，他就会触发显示改变的内容，提示改变的位置，可以通过右边的 watch、call stack 加一些参数进去。
  停掉监控的方法：element/DOM Breakpoints，我们会找到改节点的断点。勾掉，断点就暂时不起作用。当然也可以右键删除断点，或者删除所有断点。

### 06 样式快速调试与修改

做们左边选取 dom 元素，右侧就可调整其对应样式。
比如调颜色，字体大小，各种细节的调整，对网站风格做适配。有些样式有杠号，说明被另外的 css 配置覆盖了。
总之用来进行细微调整非常方便（包括新增和删除样式），我们可以快速看到样式的覆盖关系，继承关系。调试觉得合适，再把他拷贝到源代码里面去。这样调样式的时候，就不需要反复本地做复制、粘贴。

### 07 调试元素的 hover 等样式

通过捕捉动画瞬间，还是比较麻烦，我们可以直接在样式`.hov`里勾选相应状态。

### 08 查看元素样式的盒装模型

样式的盒状模型是 CSS 的基本概念：
CSS 盒状模型是大多数 CSS 布局与定位的基础，它以包含 4 个成分的有界限的盒子来描述网页中的每个元素。包括 content、padding、border、margin 几个要素。

> 盒子的尺寸=内容尺寸(width+height) + 内边距(padding) + 边框粗细(border) + 外边距(margin)
> 我们也可以直接在盒装模型上调整参数。

### 09 查看元素最终的样式

我们查看元素样式，可以进入`style`查看，我们要上下滚动查找，还有排除被杠掉的样式。
如何查看最终样式？可以点`computed`直接看最终的盒状模式，样式。最终计算的所有样式都列出。点`showall`查看当前可用的所有样式。

> 有些样式你并没有设置，他是继承得来的，继承于浏览器或者当前属性的默认值。只想查看自己修改、设置的值，把 showall 关掉即可。
> 每个样式属性值有个箭头，点他可快速跳至 style 里对应属性位置。

### 10 元素事件监听查看

有些元素是有事件的，如何事件监听？
方式是打开 chrome 调试窗口，element/ Event Listeners 就可以事件监听。通过页面 inspect 找到当前监听元素，在 Event Listener 点击其 click 事件，就会跳到对应的 JS 里面，告诉你 click 事件是调用的哪部分的 function。（如果这部分做了代码混淆，看不到具体内容。)

当然除了 click 事件，还有 focus、focusin、focusout、keydown、load 等各种各样的事件，我们可以快速定位到各自事件上做代码查看。这个功能是非常有用的，因为有时后我们不知道点击后，调用的 click 代码是哪边的，我们就可以通过这种方法快递定位到对应的函数里面来。

## 11~20

### 11 console 的好用处

我们打开控制台，第二个标签 console。

- 他用于输出控制台的信息（错误的信息，调试的信息）
- 操作页面 dom
- 与页面无关的运算
- 检验 js 语法
  …其他用处

### 12 console 的一些常用设置

**第一个图标，杠圈：**
用于清空控制台，
**第二图标，默认 top**
选择调试对应插件输出的 console
**第三个图标，filter**
快速做筛选，你可以用正则形式匹配 url 的筛选。匹配某个 url 输出的内容。
**第四个图标，default levels**
console 有几个级别：info、warning、errors。你也可以把所有的输出都 show 出来。
**最右边有个图标，设置**
一些选项可以勾先，移上去会有解释，

我们右键还能

- 清空
- 保存数据：将调试保存起来（比如控制台的所有的日志），发给别人（需要的时候）。

### 13 如何查看被压缩的 `JS_CSS`源码

根据 10 的方法，找到被调用的事件方法在源码。这仅仅是找到，得到的代码被压缩成一行，可读性差。要想查阅，我还需按下方大括号`pretty print`来展开所有代码。前提是源码没有做混淆。
css 代码的查看也是一样。

这个查看别人的代码非常有用。

### 14 查看整站的加载资源以及编辑

打开 sources/ page，会看到整个网站请求的所有资源，跟站点的请求资源，外部站点的请求资源。
这些资源文件内容都可快速更改，直接展示在页面上（包括外部资源）。

### 15 调试 JavaScript 的 Call Stack

Call Stack 不管怎样的语言都会接触到，比如`C++，JavaScript`之类的语言
调试 call stack 非常方便，你找到一个 js 文件之后，在右边就会显示`call stack`。因为是别人写的代码，你不熟悉，所以要看他执行的顺序，最先执行的在最下面，你塞的断点也可以在里面显示出来。

### 16 编辑源文件并同步到本地文件中

我们在浏览器中调样式，只是模拟修改。要想改变本地源码还得拷贝到本地文件。
有时这是不满足大量修改的需求的。我们希望可以在浏览器修改，本地就自动保存了。
方法是有的：
sources/Filesystem /Add folder to workspace. 把文件夹加载到工作区即可。同时允许浏览器访问本地文件的权限。于是所有修改都可以同步到本地。另外，远程的网页，也可以 map，修改同步到本地（类似研究)

### 17 网络请求的监护

每个网页都会有请求。网络级别的请求（不是系统级别的）chrome 的抓包还是非常好用的。在 Network 下直接集成在 chrome 中的。

进入后，我方看到界面上有时间轴，如何刷新加载的提示。请求之后，我们可以看到当前网络的所有请求数据流；看到每一段的请求，请求了哪些资源，
默认可以看整个请求的所有资源，包括：请求的 css，请求的图片（请求图片的所有状态），还有 js 代码，统计代码，整个页面的加载时间。

### 18 网络请求面板的按钮使用说明

第一个按钮。
对抓包请求的开始和关闭
第二个按钮
clear 键，清空请求数据。
第三个按钮，capture screenshots
截图，看每个请求段情况
下方，filter 框
当请求资源非常多的时候，你可以做一些筛选，比如以正则的形式。
preserve log
开启后，即使刷新之前的请求数据仍在。
disable cache
勾上之后，整个浏览器的资源都会重新请求一遍。
offline
模拟当前网络断线的请求状态。（你会得到一只恐龙）
其他
右边还可以模仿 3g，快速 3g，慢速 3g 的请求情况。还可以模拟自定义的网络请求。一般我们都是在电脑上，如果我们在手机上很慢的情况是怎样的，就需要模拟了。

### 19 监控页面重绘的方法

做一些网页的动画，网页的性能的时候在，作为一个重要参考指标。
打开 more tools/rendering

- paint flashing 页面重绘的区域高亮 （发现页面卡，找到重绘元素时就很直观)
- 其他一些类似选项

### 20 如何监控并统计没有使用到脚本

页面上没有使用到的 CSS、JavaScript，可以快速监控。我们开发引用他人 CSS 资源库、类包，实际只用了很少的东西，加载却全部加载。这时就可做网页优化，把不使用的内容去掉。问题来了：

> 如何知道哪些有用，哪些没有？（当然，前期开发的时候就要把关，不引入没用的代码）

打开 more tools/ coverage 工具。(coverage 理解为：覆盖面积或覆盖率)
他已经给出了各文件夹使用率数据，并有颜色区分，非常直观。甚至，我们可以点进文件，看具体代码段的使用详情。
也许会好奇为什么这些资源使用率这么低？原因是一个站点有好多页面，这个页面没有使用到，别的页面可能用到了。所以不能只看当前这个页面的使用情况。这里有一个优化技巧，如果一个页面访问非常多，可直接把页面 css 独立出来，这样每次就不用多加载不用的内容了。与 css
文件类似，js 文件也同样有很低的使用率，如果用的是 jQery 的库，这也不奇怪了。

总之，网页性能加载优化的时候，这个工具非常方便。

## 21~30

### 21 如何监控页面的动画变更

有些网页的小游戏，会用 css 的动画来写，整个的调试过程会非常复杂。
打开 more tools/ animation 来调试
可以调整： 背景、颜色、时间等参数，来让动画达到效果。

### 22 网络条件与 user-agent 的设置

大的站点会适配 PC，pad，手机等不同终端设备，给出不同的显示效果。我们调试时，配齐所有外部重终端设备话，不大现实，我们在 pc 端模拟各终端的设备访问即可。
具体方法是用 more tools/ network conditions 网络条件功能进行模拟（PS：记得先把缓存禁用）

- 模拟网络环境
- 模拟设备，将 user-agent 调为需要机型。

### 23 快速以编辑状态查看一个站点加载的所有资源

14 已经提及了，但是需要一个个点击文件夹才能找到文件位置，如网站大资源很多，目录层级多就不便查看。使用快速关键查找功能即可，
使用快捷键 command + P。

### 24 调试 Andriod 设备的方法

/more tools/ remote devices
这个工具很多同学不知道，快速调整元素布局是非常顺手的。
把 Andriod 手机接上电脑可以显示出你的安卓设备，可在浏览器上调试你的手机元素，可以做双向通信，比如将你的安卓截屏发送到 chrome 里来，安卓手机上有网络请求，你也可以看到请求情况，类似于抓包。

另外一个 andriod 开发的好工具叫： `andriod studio`，我们基本用不着。页面布局用 chome 还是非常方便的，利用起我们前端开发的习惯。
这个隐藏的功能很少有人用。你也可以看他给出的文档，来看如何做远程的调试。

### 25 如何让浏览器阻止请求某些资源

首先想到阻止广告。我们平时用浏览器插件来屏蔽广告，此处是开发层面，通过自定义的形式，把不想要的资源 js、ccs 甚至一些图片阻止，不让他显示出来。
找到 more tools/ request blocking

- 勾选为启动
- 加号定义规则，用类似正则的内容来做
  比如`*siteCss`添加后，函授此字段的路径或文件都不能加载。
  再看`network`上出现黄色的感叹号，说明有些请求被 block 掉了。

### 26 如何对站点下所有的资源进行全部搜索

moretools/search
用途：在 css、js 文件里面对文件内容精准定位。（注：html 不是资源型文件，不能精准搜索。）

### 27 如何在浏览器中摸出一些传感器数据

传感器应用案例
1.html 获取用户的 position(https://www.w3schools.com/html/html5\_geolocation.asp) 2.手机里面横屏、竖屏、陀螺仪等感应。

我们可以用 more tools/sensors 进行模拟，他支持以下功能：

- Geolocation： 地理信息
- orientation：手机的方向，正向，反向，左右上下横屏,甚至手动调整角度，获取陀螺仪的代码就可以在这里做测试

### 28 性能分析的方法（一）

此处优化是客户端优化：比如执行 JavaScript 非常的卡，特别是执行 css 动画卡的时候。（网络请求慢，api 错误，是服务端优化的内容，此处不作讲解。)

开始做性能测试：

- 隐身模式打开网页，这样不会加载你很多浏览器的插件。一个都不会加载，除非你进行了特别的设置，这样排除插件对页面性能的影响。
- 打开谷歌官方性能测试[页面](https://googlechrome.github.io/devtools-samples/jank/)
- 打开调试工具，打开 performance/capture setting （设置按钮）
  - 让 cpu 性能降速，来模拟手机环境。4 倍降速，6 倍降速。我们还可以添加模块的数量。
    有卡的效果出现后，
  - 通过 recall 重新执行页面，等待 7s 左右，点击页面上`optimiz`。明显流畅了很多，点击停止后，这浏览器就拿到了优化前和优化后的数据。
    我们看 chrome 可以提供哪些信息：
  - 看 fps 帧率数据来判断性能效果（卡的部分已经显示为红色，非常友好）
    > 游戏 60fps 就比较流畅，电影 24fps 也很流畅是因为，他每一针是一段，而不仅仅是一个点。网页是滚动查看效果，不需要 60fps，17fps 已经很流程了。

### 29 性能分析的方法（二)

NetWork
有时候的确是网络加载比较慢，所以来`performance`这边做记录，点击`record`，7s 后停止记录。
然后可以查看请求的状态以及请求的时长。（PS：查看快捷键 WASD。）
**call tree** 是个很重要的功能，可查看代码耗时程度，甚至每一行的代码的执行时间。

推荐链接：
谷歌官网，可以看更多 [performance analysis](https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference) 的介绍。

### 30 性能分析的方法（三)

主要是小插件、小技巧的介绍。
我们找到问题代码，有可装一些插件来看源码。
推荐官方文档：[时间线时间参考](https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/performance-reference?hl=zh-cn)

其他技巧，待补充...
