---
title: 重装鼠须管2019版本
date: 2019-02-25 23:24:17
tags: 工具

---
## 缘由：
今天做了一件多余的事情，调了下鼠须管的配置参数，然后奇怪的事情就发生了，怎么都无法启用双拼输入方案。这才发现鼠须管2019的版本有了重大调整。同时看到官方[issues](https://github.com/rime/squirrel/issues/281)里面写到：

>我在開發和調試的時候注意到在 Mojave 這版 macOS 上，更新輸入法並覆寫程序文件之後，系統仍會調用更新前版本的程序。
>我推測，系統保持了可執行文件的引用並在輸入法進程結束後利用保存的環境繼續調用，這可能是某種「安全優化」。

好像之前的更新是无效的，于是决定重装来解决。



## 再次熟悉

### 为什么选择鼠须管

鼠须管作为一个输入法软件，可自由定制等输入方案，快捷输入特殊字符，emoji，可自制词典库，多国输出语言等众多优点。其中在乎的就两点：

1.作为一个系统级别的软件，开源软件没有商业元素在里面，用得放心。
2.带有词频统计，形成本地词库，优先显示历史输入。

至于缺点，比如调制繁琐就不算什么了。随着这次更新，他的调制难度也大大降低了，我们看看新版本哪些变化吧。

PS：鼠须管是在Mac平台的叫法，在windows平台叫rime，配置大同小异。

### 有哪些变化

鼠须管升级为 0.11，这个版本中各种输入方案（五笔、仓吉、luna拼音)调用方式没变，输入触发机制有所调整，粗看有以下变化。
- 默认输入法只保留一个简拼，不再捆绑仓吉、五笔等输入方案，我们可以按需安裝。
- 同步方式也变了，可以手动备份你的配置文件到sync文件夹内。
- 更新后的鼠须管安装目录文件精简，逻辑清晰。

总之，原有文件系统太乱，各种不能忍，必须重装。

### 安装方法

当前最新版本 0.11.0
官方下载地址：[https://rime.im/download/]
Github仓库：[https://github.com/rime/squirrel]
准备工作做好后，我们就开始吧。
新手没有代码基础，不知rime的文件结构也没关系，直接从第2步开始。装上用起来再说。

1.先卸载老版本
如何干净地**卸载**鼠须管输入法？

```
say goodbye Squirrel && killall Squirrel
```

系统偏好设置 - 键盘 - 输入源 - 鼠须管，移除

```
sudo rm -rf "/Library/Input Methods/Squirrel.app" rm -rf ~/Library/Rime
```

2.安装新版本
我先用brew install的方法安装，终端提示安装成功，可菜单栏就是没有显示，根目录library里并未出现Rime文件夹。
于是重新卸载，按第1步重来。老老实实`下载dmg安装包安装`。需要注意的是，安装需要进入”安全与隐私”设置，允许未知来源等软件，点击`仍要打开`，便可安装下去。

3.定制
我们已经得到默认开箱版本，他已经集成了luna拼音输入方案。如果没有其他需求就可到此结束。



而我需要加入”小鹤双拼”方案。思路是去`找配置文件拷入`，操作如下：
于是我将[cnfeat的方案](https://github.com/cnfeat/Rime)下载下来，直接拷入鼠须管的安装目录~/Library/Rime后`deploy`即可。（进不去的话，用此链接: https://pan.baidu.com/s/15yUyHHs_6wctSh8CS_YgFQ 提取码: db2v ）

#### cnfeat方案的优点：

- 默认给出了常用短语，`custom_phrase.txt`。比如输入”js”自动触发显示”JavaScript”，真好。当然在定制环节，你也可以补充自己的短语库。

- 图标映射关系梳理：网络上其他把所有图标都集中于symbols.yaml方案，需要记忆大量键位来主动触发。而本方案极个别sybmols符号继续用”/xx”的方式调用，其他图标或emoj表情都靠中文自动触发。节省了很多记忆负担。

应该是最好的方案，没有之一。

拷贝完之后，定制就这么`完成`了。

### 存在的问题

然而，小问题还是有的。官方的issues里面也列出了一些。我发现的有：

- vscode中小鹤双拼方案不能输入中文😓️，只能切到默认简拼方案输入中文。
- 在终端中，只能英文输入。（终端本来就是代码环境，只能输入英文似乎也能接受。）
  也许还有更多的bug等着我们去发现。

解决：进入Rime/build/squirrel.yaml 把对应软件的默认英文输入关掉`改为false`，每次修改deploy即可。

```
//以VScode为例，其他软件自行修改。
com.microsoft.VSCode:
    ascii_mode: false
```



## 最后
软件轻轻松松装好了，既然已经能用，就赶紧干活儿去吧，正事要紧。

也许是时候再练习一下[双拼](https://sspai.com/post/42667)打字了。